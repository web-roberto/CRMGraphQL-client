{"ast":null,"code":"var _jsxFileName = \"C:\\\\DESPLIEGUES\\\\APLICACIONES-EN-GITHUB\\\\portolio-apps\\\\web-development\\\\jp-crm-graphql\\\\crmcliente\\\\components\\\\Cliente.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Swal from 'sweetalert2';\nimport { gql, useMutation } from '@apollo/client';\nimport Router from 'next/router';\nconst ELIMINAR_CLIENTE = gql`\n    mutation eliminarCliente($id: ID!) {\n        eliminarCliente(id:$id) \n    }\n`;\nconst OBTENER_CLIENTES_USUARIO = gql`\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n            id\n            nombre\n            apellido\n            empresa\n            email\n        }\n    }\n\n`;\n\nconst Cliente = ({\n  cliente\n}) => {\n  // mutation para eliminar cliente\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE, {\n    update(cache) {\n      // obtener una copia del objeto de cache\n      const {\n        obtenerClientesVendedor\n      } = cache.readQuery({\n        query: OBTENER_CLIENTES_USUARIO\n      }); // Reescribir el cache\n\n      cache.writeQuery({\n        query: OBTENER_CLIENTES_USUARIO,\n        data: {\n          obtenerClientesVendedor: obtenerClientesVendedor.filter(clienteActual => clienteActual.id !== id)\n        }\n      });\n    }\n\n  });\n  const {\n    nombre,\n    apellido,\n    empresa,\n    email,\n    id\n  } = cliente; // Elimina un cliente\n\n  const confirmarEliminarCliente = () => {\n    Swal.fire({\n      title: '¿Deseas eliminar a este cliente?',\n      text: \"Esta acción no se puede deshacer\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, Eliminar',\n      cancelButtonText: 'No, Cancelar'\n    }).then(async result => {\n      if (result.value) {\n        try {\n          // Eliminar por ID\n          const {\n            data\n          } = await eliminarCliente({\n            variables: {\n              id\n            }\n          }); // console.log(data);\n          // Mostrar una alerta\n\n          Swal.fire('Eliminado!', data.eliminarCliente, 'success');\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  const editarCliente = () => {\n    Router.push({\n      pathname: \"/editarcliente/[id]\",\n      query: {\n        id\n      }\n    });\n  };\n\n  return __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, nombre, \"  \", apellido), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, empresa), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, email), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => confirmarEliminarCliente(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, \"Eliminar\", __jsx(\"svg\", {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    className: \"w-4 h-4 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 170\n    }\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => editarCliente(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"Editar\", __jsx(\"svg\", {\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\",\n    className: \"w-4 h-4 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    d: \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 170\n    }\n  })))));\n};\n\nexport default Cliente;","map":{"version":3,"names":["React","Swal","gql","useMutation","Router","ELIMINAR_CLIENTE","OBTENER_CLIENTES_USUARIO","Cliente","cliente","eliminarCliente","update","cache","obtenerClientesVendedor","readQuery","query","writeQuery","data","filter","clienteActual","id","nombre","apellido","empresa","email","confirmarEliminarCliente","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","value","variables","error","console","log","editarCliente","push","pathname"],"sources":["C:/DESPLIEGUES/APLICACIONES-EN-GITHUB/portolio-apps/web-development/jp-crm-graphql/crmcliente/components/Cliente.js"],"sourcesContent":["import React from 'react';\nimport Swal from 'sweetalert2';\nimport { gql, useMutation } from '@apollo/client'\nimport Router from 'next/router'\n\nconst ELIMINAR_CLIENTE = gql`\n    mutation eliminarCliente($id: ID!) {\n        eliminarCliente(id:$id) \n    }\n`;\n\nconst OBTENER_CLIENTES_USUARIO = gql`\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n            id\n            nombre\n            apellido\n            empresa\n            email\n        }\n    }\n\n`;\n\n\nconst Cliente = ({cliente}) => {\n\n    // mutation para eliminar cliente\n    const [ eliminarCliente ] = useMutation( ELIMINAR_CLIENTE, {\n        update(cache) {\n            // obtener una copia del objeto de cache\n            const { obtenerClientesVendedor } = cache.readQuery({ query: OBTENER_CLIENTES_USUARIO });\n\n            // Reescribir el cache\n            cache.writeQuery({\n                query: OBTENER_CLIENTES_USUARIO,\n                data: {\n                    obtenerClientesVendedor : obtenerClientesVendedor.filter( clienteActual => clienteActual.id !== id )\n                }\n            })\n        }\n    }  );\n\n    const { nombre, apellido, empresa, email, id } = cliente;\n\n\n    // Elimina un cliente\n    const confirmarEliminarCliente = () => {\n        Swal.fire({\n            title: '¿Deseas eliminar a este cliente?',\n            text: \"Esta acción no se puede deshacer\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Si, Eliminar',\n            cancelButtonText: 'No, Cancelar'\n          }).then( async (result) => {\n            if (result.value) {\n\n                try {\n                    // Eliminar por ID\n                    const { data } = await eliminarCliente({\n                        variables: {\n                            id\n                        }\n                    });\n                    // console.log(data);\n\n                    // Mostrar una alerta\n                    Swal.fire(\n                        'Eliminado!',\n                        data.eliminarCliente,\n                        'success'\n                    )\n                } catch (error) {\n                    console.log(error);\n                }\n            }\n          })\n    }\n\n    const editarCliente = () => {\n        Router.push({\n            pathname: \"/editarcliente/[id]\",\n            query: { id }\n        })\n    }\n\n    return ( \n            <tr>\n                <td className=\"border px-4 py-2\">{nombre}  {apellido}</td>\n                <td className=\"border px-4 py-2\">{empresa}</td>\n                <td className=\"border px-4 py-2\">{email}</td>\n                <td className=\"border px-4 py-2\">\n                    <button\n                        type=\"button\"\n                        className=\"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\n                        onClick={() => confirmarEliminarCliente() }\n                    >\n                        Eliminar\n\n                        <svg fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" className=\"w-4 h-4 ml-2\"><path d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>\n                    </button>\n                </td>\n                <td className=\"border px-4 py-2\">\n                    <button\n                        type=\"button\"\n                        className=\"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\n                        onClick={() => editarCliente() }\n                    >\n                        Editar\n\n                        <svg fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" className=\"w-4 h-4 ml-2\"><path d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path></svg>\n                    </button>\n                </td>\n            </tr>\n     );\n}\n \nexport default Cliente;"],"mappings":"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"},"metadata":{},"sourceType":"module"}