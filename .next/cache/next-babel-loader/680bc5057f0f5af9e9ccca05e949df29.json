{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport Layout from '../components/Layout';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { useMutation, gql } from '@apollo/client';\nconst NUEVA_CUENTA = gql`\n    mutation nuevoUsuario($input: UsuarioInput) {\n        nuevoUsuario(input: $input) {\n            id\n            nombre\n            apellido\n            email\n        }\n    }\n`;\n\nconst NuevaCuenta = () => {\n  // State para el mensaje\n  const {\n    0: mensaje,\n    1: guardarMensaje\n  } = useState(null); // Mutation para crear nuevos usuarios\n\n  const [nuevoUsuario] = useMutation(NUEVA_CUENTA); // Routing\n\n  const router = useRouter(); // Validación del formulario\n\n  const formik = useFormik({\n    initialValues: {\n      nombre: '',\n      apellido: '',\n      email: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      nombre: Yup.string().required('El Nombre es Obligatorio'),\n      apellido: Yup.string().required('El Apellido es obligatorio'),\n      email: Yup.string().email('El email no es válido').required('El email es obligatorio'),\n      password: Yup.string().required('El password no puede ir vacio').min(6, 'El password debe ser de al menos 6 caracteres')\n    }),\n    onSubmit: async valores => {\n      // console.log('enviando');\n      // console.log(valores);\n      const {\n        nombre,\n        apellido,\n        email,\n        password\n      } = valores;\n\n      try {\n        const {\n          data\n        } = await nuevoUsuario({\n          variables: {\n            input: {\n              nombre,\n              apellido,\n              email,\n              password\n            }\n          }\n        });\n        console.log(data); // Usuario creado correctamente\n\n        guardarMensaje(`Se creo correctamente el Usuario: ${data.nuevoUsuario.nombre} `);\n        setTimeout(() => {\n          guardarMensaje(null);\n          router.push('/login');\n        }, 3000); // Redirigir usuario para iniciar sesión\n      } catch (error) {\n        guardarMensaje(error.message.replace('GraphQL error: ', ''));\n        setTimeout(() => {\n          guardarMensaje(null);\n        }, 3000);\n      }\n    }\n  }); // if(loading) return 'Cargando...';\n\n  const mostrarMensaje = () => {\n    return __jsx(\"div\", {\n      className: \"bg-white py-2 px-3 w-full my-3 max-w-sm text-center mx-auto\"\n    }, __jsx(\"p\", null, mensaje));\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Layout, null, mensaje && mostrarMensaje(), __jsx(\"h1\", {\n    className: \"text-center text-2xl text-white font-light\"\n  }, \"Crear Nueva Cuenta\"), __jsx(\"div\", {\n    className: \"flex justify-center mt-5\"\n  }, __jsx(\"div\", {\n    className: \"w-full max-w-sm\"\n  }, __jsx(\"form\", {\n    className: \"bg-white rounded shadow-md px-8 pt-6 pb-8 mb-4\",\n    onSubmit: formik.handleSubmit\n  }, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"nombre\"\n  }, \"Nombre\"), __jsx(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"nombre\",\n    type: \"text\",\n    placeholder: \"Nombre Usuario\",\n    value: formik.values.nombre,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur\n  })), formik.touched.nombre && formik.errors.nombre ? __jsx(\"div\", {\n    className: \"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\"\n  }, __jsx(\"p\", {\n    className: \"font-bold\"\n  }, \"Error\"), __jsx(\"p\", null, formik.errors.nombre)) : null, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"apellido\"\n  }, \"Apellido\"), __jsx(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"apellido\",\n    type: \"text\",\n    placeholder: \"Apellido Usuario\",\n    value: formik.values.apellido,\n    onChange: formik.handleChange\n  })), formik.touched.apellido && formik.errors.apellido ? __jsx(\"div\", {\n    className: \"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\"\n  }, __jsx(\"p\", {\n    className: \"font-bold\"\n  }, \"Error\"), __jsx(\"p\", null, formik.errors.apellido)) : null, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"email\"\n  }, \"Email\"), __jsx(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email Usuario\",\n    value: formik.values.email,\n    onChange: formik.handleChange\n  })), formik.touched.email && formik.errors.email ? __jsx(\"div\", {\n    className: \"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\"\n  }, __jsx(\"p\", {\n    className: \"font-bold\"\n  }, \"Error\"), __jsx(\"p\", null, formik.errors.email)) : null, __jsx(\"div\", {\n    className: \"mb-4\"\n  }, __jsx(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"password\"\n  }, \"Password\"), __jsx(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"password\",\n    type: \"password\",\n    placeholder: \"Password Usuario\",\n    value: formik.values.password,\n    onChange: formik.handleChange\n  })), formik.touched.password && formik.errors.password ? __jsx(\"div\", {\n    className: \"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\"\n  }, __jsx(\"p\", {\n    className: \"font-bold\"\n  }, \"Error\"), __jsx(\"p\", null, formik.errors.password)) : null, __jsx(\"input\", {\n    type: \"submit\",\n    className: \"bg-gray-800 w-full mt-5 p-2 text-white uppercas hover:cursor-pointer hover:bg-gray-900\",\n    value: \"Crear Cuenta\"\n  }))))));\n};\n\nexport default NuevaCuenta;","map":null,"metadata":{},"sourceType":"module"}