{"ast":null,"code":"var _jsxFileName = \"C:\\\\DESPLIEGUES\\\\APLICACIONES-EN-GITHUB\\\\portolio-apps\\\\web-development\\\\jp-crm-graphql\\\\crmcliente\\\\pages\\\\mejoresclientes.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect } from 'react';\nimport Layout from '../components/Layout';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\nimport { gql, useQuery } from '@apollo/client';\nconst MEJORES_CLIENTES = gql`\n    query mejoresClientes {\n            mejoresClientes {\n            cliente {\n                nombre\n                empresa\n            }\n            total\n        }\n    }\n`;\n\nconst MejoresClientes = () => {\n  const {\n    data,\n    loading,\n    error,\n    startPolling,\n    stopPolling\n  } = useQuery(MEJORES_CLIENTES);\n  useEffect(() => {\n    startPolling(1000);\n    return () => {\n      stopPolling();\n    };\n  }, [startPolling, stopPolling]);\n  if (loading) return 'cargando...';\n  console.log(data);\n  const {\n    mejoresClientes\n  } = data;\n  const clienteGrafica = [];\n  mejoresClientes.map((cliente, index) => {\n    clienteGrafica[index] = _objectSpread({}, cliente.cliente[0], {\n      total: cliente.total\n    });\n  });\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-2xl text-gray-800 font-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"Mejores Clientes\"), __jsx(BarChart, {\n    className: \"mt-10\",\n    width: 600,\n    height: 500,\n    data: clienteGrafica,\n    margin: {\n      top: 5,\n      right: 30,\n      left: 20,\n      bottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, __jsx(CartesianGrid, {\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }), __jsx(XAxis, {\n    dataKey: \"nombre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }), __jsx(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }), __jsx(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }), __jsx(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), __jsx(Bar, {\n    dataKey: \"total\",\n    fill: \"#3182CE\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default MejoresClientes;","map":{"version":3,"names":["React","useEffect","Layout","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","gql","useQuery","MEJORES_CLIENTES","MejoresClientes","data","loading","error","startPolling","stopPolling","console","log","mejoresClientes","clienteGrafica","map","cliente","index","total","top","right","left","bottom"],"sources":["C:/DESPLIEGUES/APLICACIONES-EN-GITHUB/portolio-apps/web-development/jp-crm-graphql/crmcliente/pages/mejoresclientes.js"],"sourcesContent":["import React, {useEffect} from 'react';\nimport Layout from '../components/Layout'\nimport {\n    BarChart, Bar,  XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n  } from 'recharts';\nimport { gql, useQuery } from '@apollo/client';\n\nconst MEJORES_CLIENTES = gql`\n    query mejoresClientes {\n            mejoresClientes {\n            cliente {\n                nombre\n                empresa\n            }\n            total\n        }\n    }\n`;\n\nconst MejoresClientes = () => {\n\n    const {data, loading, error, startPolling, stopPolling} = useQuery(MEJORES_CLIENTES);\n\n  \n\n    useEffect(() => {\n        startPolling(1000);\n        return () => {\n            stopPolling();\n        }\n    }, [startPolling, stopPolling])\n\n    if(loading) return 'cargando...';\n\n    console.log(data);\n\n\n    const {mejoresClientes} = data;\n    \n    const clienteGrafica = [];\n\n    mejoresClientes.map((cliente, index) => {\n        clienteGrafica[index] = {\n            ...cliente.cliente[0],\n            total: cliente.total\n        }\n    })\n\n\n    return (\n        <Layout>\n            <h1 className=\"text-2xl text-gray-800 font-light\">Mejores Clientes</h1>\n\n            <BarChart\n                className=\"mt-10\"\n                width={600}\n                height={500}\n                data={clienteGrafica}\n                margin={{\n                    top: 5, right: 30, left: 20, bottom: 5,\n                }}\n            >\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"nombre\" />\n                <YAxis />\n                <Tooltip />\n                <Legend />\n                <Bar dataKey=\"total\" fill=\"#3182CE\" />\n            </BarChart>\n        </Layout>\n     );\n}\n \nexport default MejoresClientes;"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SACIC,QADJ,EACcC,GADd,EACoBC,KADpB,EAC2BC,KAD3B,EACkCC,aADlC,EACiDC,OADjD,EAC0DC,MAD1D,QAES,UAFT;AAGA,SAASC,GAAT,EAAcC,QAAd,QAA8B,gBAA9B;AAEA,MAAMC,gBAAgB,GAAGF,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;;AAYA,MAAMG,eAAe,GAAG,MAAM;EAE1B,MAAM;IAACC,IAAD;IAAOC,OAAP;IAAgBC,KAAhB;IAAuBC,YAAvB;IAAqCC;EAArC,IAAoDP,QAAQ,CAACC,gBAAD,CAAlE;EAIAX,SAAS,CAAC,MAAM;IACZgB,YAAY,CAAC,IAAD,CAAZ;IACA,OAAO,MAAM;MACTC,WAAW;IACd,CAFD;EAGH,CALQ,EAKN,CAACD,YAAD,EAAeC,WAAf,CALM,CAAT;EAOA,IAAGH,OAAH,EAAY,OAAO,aAAP;EAEZI,OAAO,CAACC,GAAR,CAAYN,IAAZ;EAGA,MAAM;IAACO;EAAD,IAAoBP,IAA1B;EAEA,MAAMQ,cAAc,GAAG,EAAvB;EAEAD,eAAe,CAACE,GAAhB,CAAoB,CAACC,OAAD,EAAUC,KAAV,KAAoB;IACpCH,cAAc,CAACG,KAAD,CAAd,qBACOD,OAAO,CAACA,OAAR,CAAgB,CAAhB,CADP;MAEIE,KAAK,EAAEF,OAAO,CAACE;IAFnB;EAIH,CALD;EAQA,OACI,MAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACI;IAAI,SAAS,EAAC,mCAAd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,sBADJ,EAGI,MAAC,QAAD;IACI,SAAS,EAAC,OADd;IAEI,KAAK,EAAE,GAFX;IAGI,MAAM,EAAE,GAHZ;IAII,IAAI,EAAEJ,cAJV;IAKI,MAAM,EAAE;MACJK,GAAG,EAAE,CADD;MACIC,KAAK,EAAE,EADX;MACeC,IAAI,EAAE,EADrB;MACyBC,MAAM,EAAE;IADjC,CALZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GASI,MAAC,aAAD;IAAe,eAAe,EAAC,KAA/B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EATJ,EAUI,MAAC,KAAD;IAAO,OAAO,EAAC,QAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAVJ,EAWI,MAAC,KAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAXJ,EAYI,MAAC,OAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAZJ,EAaI,MAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAbJ,EAcI,MAAC,GAAD;IAAK,OAAO,EAAC,OAAb;IAAqB,IAAI,EAAC,SAA1B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAdJ,CAHJ,CADJ;AAsBH,CApDD;;AAsDA,eAAejB,eAAf"},"metadata":{},"sourceType":"module"}